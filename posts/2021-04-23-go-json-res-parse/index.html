<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Parsing HTTP response in Golang - Raghavendra Kaushik</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Recently, while writing some code in Golang, I had to make HTTP requests and use the response. The response obtained is a string and it needs to parsed, which was kind of frustrating process(it is really smooth in other languages like JS and Python). Many sources suggest to define a struct and Parse, which is actually a good way. But I wish to write less for sake of simplicity. So in this post, I attempt to parse the different cases of JSON response with less lines of code, though it is not a recommended way!"><meta property="og:image" content><meta property="og:title" content="Parsing HTTP response in Golang"><meta property="og:description" content="Recently, while writing some code in Golang, I had to make HTTP requests and use the response. The response obtained is a string and it needs to parsed, which was kind of frustrating process(it is really smooth in other languages like JS and Python). Many sources suggest to define a struct and Parse, which is actually a good way. But I wish to write less for sake of simplicity. So in this post, I attempt to parse the different cases of JSON response with less lines of code, though it is not a recommended way!"><meta property="og:type" content="article"><meta property="og:url" content="https://rakaar.github.io/posts/2021-04-23-go-json-res-parse/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-23T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-23T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Parsing HTTP response in Golang"><meta name=twitter:description content="Recently, while writing some code in Golang, I had to make HTTP requests and use the response. The response obtained is a string and it needs to parsed, which was kind of frustrating process(it is really smooth in other languages like JS and Python). Many sources suggest to define a struct and Parse, which is actually a good way. But I wish to write less for sake of simplicity. So in this post, I attempt to parse the different cases of JSON response with less lines of code, though it is not a recommended way!"><script src=https://rakaar.github.iojs/feather.min.js></script><link href=https://rakaar.github.io/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://rakaar.github.io/css/main.5a5ffad9e55591a3e4fcebdb9ed3807c781cabfdb4de3dcf89a187a9f18d9bd9.css></head><body><div class=content><header><div class=main><a href=https://rakaar.github.io>Raghavendra Kaushik</a></div><nav><a href=/>Home</a>
<a href=/posts>Blog</a>
<a href=/about>About</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Parsing HTTP response in Golang</h1><div class=meta>Posted on Apr 23, 2021</div></div><section class=body><p>Recently, while writing some code in Golang, I had to make HTTP requests and use the response. The response obtained is a string and it needs to parsed, which was kind of frustrating process(it is really smooth in other languages like JS and Python). Many sources suggest to define a struct and Parse, which is actually a good way. But I wish to write less for sake of simplicity. So in this post, I attempt to parse the different cases of JSON response with less lines of code, though it is not a recommended way!</p><h2 id=making-http-request>Making HTTP request</h2><p>Suppose you want to making a GET request with headers, you can do it with the following code</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>MakeRequest</span>(<span style=color:#a6e22e>URL</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span>{
	<span style=color:#a6e22e>client</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Client</span>{}
	<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#a6e22e>URL</span>, <span style=color:#66d9ef>nil</span>)
	<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Header_Key&#34;</span>, <span style=color:#e6db74>&#34;Header_Value&#34;</span>)
	<span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Do</span>(<span style=color:#a6e22e>req</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Err is&#34;</span>, <span style=color:#a6e22e>err</span>)
	}
	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>Body</span>.<span style=color:#a6e22e>Close</span>()

	<span style=color:#a6e22e>resBody</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ioutil</span>.<span style=color:#a6e22e>ReadAll</span>(<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>Body</span>)
	<span style=color:#a6e22e>response</span> <span style=color:#f92672>:=</span> string(<span style=color:#a6e22e>resBody</span>)

	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>response</span> 
}
</code></pre></td></tr></table></div></div><h2 id=1-suppose-the-response-is-a-json>1. Suppose the response is a JSON</h2><p>For example, the response is</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
<span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;raghav&#34;</span>,
<span style=color:#f92672>&#34;age&#34;</span>: <span style=color:#ae81ff>19</span>
}
</code></pre></td></tr></table></div></div><p>Then to parse it</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>MakeRequest</span>(<span style=color:#a6e22e>api_url</span>) <span style=color:#75715e>// Making the request
</span><span style=color:#75715e></span><span style=color:#a6e22e>resBytes</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>res</span>) <span style=color:#75715e>// Converting the string &#34;res&#34; into byte array
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>jsonRes</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{} <span style=color:#75715e>// declaring a map for key names as string and values as interface 
</span><span style=color:#75715e></span><span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>resBytes</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>jsonRes</span>) <span style=color:#75715e>// Unmarshalling
</span><span style=color:#75715e>// I SKIPPED THE ERROR HANDLING FOR BREVITY, BUT YOU SHOULD NOT
</span></code></pre></td></tr></table></div></div><p>You can get the individual values from the map like in below code. Note the typecasting done. For example &ldquo;raghav&rdquo; and 19 are of interface{} type. Mostly, they are useful if they are of string and integer type. Typecasting to string is straight forward as you can see below. But for integers, using the same way doesn&rsquo;t work. Below is the right way to do it. (refer <a href=https://stackoverflow.com/questions/18041334/convert-interface-to-int>Mujibur&rsquo;s answer</a>)</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>jsonRes</span>[<span style=color:#e6db74>&#34;name&#34;</span>].(<span style=color:#66d9ef>string</span>)
<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span> = int(<span style=color:#a6e22e>jsonRes</span>[<span style=color:#e6db74>&#34;age&#34;</span>].(<span style=color:#66d9ef>float64</span>))
</code></pre></td></tr></table></div></div><h2 id=2-suppose-the-response-is-an-array->2. Suppose the response is an array []</h2><p>For example, if the response is</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>[
 {
   <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;raghav&#34;</span>,
   <span style=color:#f92672>&#34;age&#34;</span>: <span style=color:#ae81ff>19</span>
 },
 {
   <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;kau&#34;</span>,
   <span style=color:#f92672>&#34;age&#34;</span>: <span style=color:#ae81ff>20</span>
 }
]
</code></pre></td></tr></table></div></div><p>To parse it</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>MakeRequest</span>(<span style=color:#a6e22e>API_URL</span>) <span style=color:#75715e>// Making the Request
</span><span style=color:#75715e></span><span style=color:#a6e22e>resBytes</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>res</span>) <span style=color:#75715e>// Converting the string &#34;res&#34; into byte array 
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>resArr</span> []<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{} <span style=color:#75715e>// declaring an array of maps with key names as string and values as interface{}
</span><span style=color:#75715e></span><span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>resBytes</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>resArr</span>) <span style=color:#75715e>// Unmarshalling
</span><span style=color:#75715e>// I SKIPPED THE ERROR HANDLING FOR BREVITY, BUT YOU SHOULD NOT
</span></code></pre></td></tr></table></div></div><p>To access values</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>resArr</span> {
    <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>resArr</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#34;name&#34;</span>].(<span style=color:#66d9ef>string</span>)
    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span> = int(<span style=color:#a6e22e>resArr</span>[<span style=color:#a6e22e>i</span>][<span style=color:#e6db74>&#34;age&#34;</span>].(<span style=color:#66d9ef>float64</span>))
}
</code></pre></td></tr></table></div></div><h2 id=3-suppose-the-response-contains-nested-json>3. Suppose the response contains nested JSON</h2><p>Like below, value of &ldquo;details&rdquo; is a JSON again</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>{
<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;raghav&#34;</span>,
<span style=color:#e6db74>&#34;details&#34;</span>: {
     <span style=color:#e6db74>&#34;city&#34;</span>: <span style=color:#e6db74>&#34;hyd&#34;</span>
   }
}
</code></pre></td></tr></table></div></div><p>We just do the type casting once again</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>MakeRequest</span>(<span style=color:#a6e22e>api_url</span>) <span style=color:#75715e>// Making the request
</span><span style=color:#75715e></span><span style=color:#a6e22e>resBytes</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>res</span>) <span style=color:#75715e>// Converting the string &#34;res&#34; into byte array
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>jsonRes</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{} <span style=color:#75715e>// declaring a map for key names as string and values as interface{}
</span><span style=color:#75715e></span><span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>resBytes</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>jsonRes</span>) <span style=color:#75715e>// Unmarshalling
</span><span style=color:#75715e></span>
<span style=color:#75715e>// Type casting again so that interface{} -&gt; map[string]interface{}
</span><span style=color:#75715e></span><span style=color:#a6e22e>details_map</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>jsonRes</span>[<span style=color:#e6db74>&#34;details&#34;</span>].(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}) <span style=color:#75715e>// type the interface again to a map with key string type and value as interface
</span><span style=color:#75715e></span><span style=color:#a6e22e>city</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>details_map</span>[<span style=color:#e6db74>&#34;city&#34;</span>].(<span style=color:#66d9ef>string</span>)
</code></pre></td></tr></table></div></div><h2 id=4-suppose-the-response-contains-a-array-as-value-of-some-key>4. Suppose the response contains a array as value of some key</h2><p>Like below, the value of &ldquo;interests&rdquo; is an array</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
   <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;raghav&#34;</span>,
    <span style=color:#f92672>&#34;interests&#34;</span>: [<span style=color:#e6db74>&#34;a&#34;</span>, <span style=color:#e6db74>&#34;b&#34;</span>, <span style=color:#e6db74>&#34;c&#34;</span>, <span style=color:#ae81ff>1</span>]
}
</code></pre></td></tr></table></div></div><p>We need to typecast the array to access its items</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#a6e22e>res</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>MakeRequest</span>(<span style=color:#a6e22e>api_url</span>) <span style=color:#75715e>// Making the request
</span><span style=color:#75715e></span><span style=color:#a6e22e>resBytes</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>res</span>) <span style=color:#75715e>// Converting the string &#34;res&#34; into byte array
</span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>jsonRes</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{} <span style=color:#75715e>// declaring a map for key names as string and values as interface 
</span><span style=color:#75715e></span><span style=color:#a6e22e>_</span> = <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>resBytes</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>jsonRes</span>) <span style=color:#75715e>// Unmarshalling
</span><span style=color:#75715e></span>
<span style=color:#75715e>// interface{} -&gt; []interface{}
</span><span style=color:#75715e></span><span style=color:#a6e22e>arr</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>jsonRes</span>[<span style=color:#e6db74>&#34;interests&#34;</span>].([]<span style=color:#66d9ef>interface</span>{}) <span style=color:#75715e>// type the interface again to a array of interfaces
</span><span style=color:#75715e></span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>arr</span> {
    <span style=color:#a6e22e>arr_item</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#75715e>// you can do the type casting as per ur requirements here
</span><span style=color:#75715e></span>}
</code></pre></td></tr></table></div></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/code>code</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://rakaar.github.io/index.xml title=RSS><i data-feather=rss></i></a>|<a class=soc href=mailto:rka87338@gmail.com title=Email><i data-feather=mail></i></a>|<a class=soc href=https://github.com/rakaar title=GitHub><i data-feather=github></i></a>|<a class=soc href=https://twitter.com/raghavendrakau9 title=Twitter><i data-feather=twitter></i></a>|⚡️
2021 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>